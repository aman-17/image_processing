from scipy.spatial import distance as dist
from imutils import perspective
from imutils import contours
import numpy as np
import argparse
import imutils
import cv2
import matplotlib.pyplot as plt
import math
from shapely.affinity import scale
from shapely.ops import transform
from shapely.geometry import Polygon
import json
from pprint import pprint
 
# Opening JSON file
f = open('dh-4-panel.json')
data = json.load(f)
d=data["txl"]["m"]["hc2"]

d1=data["txl"]["m"]["fc1"]

d2=data["txl"]["m"]["bc1"]

d3=data["txl"]["m"]["fc2"]


img = cv2.imread("IMG_5438.jpg")

# plt.imshow(img)
# plt.show()


p=35



px1=math.ceil(p*d['xp1'])
px2=math.ceil(p*d['xp2'])

py1=math.ceil(p*d['yp1'])
py2=math.ceil(p*d['yp2'])

xc1=math.ceil(p*d['cx1'])
xc2=math.ceil(p*d['cx2'])
xc3=math.ceil(p*d['cx3'])
xc4=math.ceil(p*d['cx4'])
xc5=math.ceil(p*d['cx5'])
xc6=math.ceil(p*d['cx6'])
xc7=math.ceil(p*d['cx7'])
xc8=math.ceil(p*d['cx8'])
xc9=math.ceil(p*d['cx9'])
xc10=math.ceil(p*d['cx10'])
xc11=math.ceil(p*d['cx11'])
xc12=math.ceil(p*d['cx12'])
xc13=math.ceil(p*d['cx13'])
xc14=math.ceil(p*d['cx14'])
xc15=math.ceil(p*d['cx15'])
xc16=math.ceil(p*d['cx16'])
xc17=math.ceil(p*d['cx17'])
xc18=math.ceil(p*d['cx18'])
xc19=math.ceil(p*d['cx19'])
xc20=math.ceil(p*d['cx20'])
xc21=math.ceil(p*d['cx21'])
xc22=math.ceil(p*d['cx22'])
xc23=math.ceil(p*d['cx23'])
xc24=math.ceil(p*d['cx24'])
xc25=math.ceil(p*d['cx25'])
xc26=math.ceil(p*d['cx26'])
xc27=math.ceil(p*d['cx27'])
xc28=math.ceil(p*d['cx28'])
xc29=math.ceil(p*d['cx29'])
xc30=math.ceil(p*d['cx30'])
xc31=math.ceil(p*d['cx31'])
xc32=math.ceil(p*d['cx32'])
xc33=math.ceil(p*d['cx33'])
xc34=math.ceil(p*d['cx34'])
xc35=math.ceil(p*d['cx35'])

yc1=math.ceil(p*d['cy1'])
yc2=math.ceil(p*d['cy2'])
yc3=math.ceil(p*d['cy3'])
yc4=math.ceil(p*d['cy4'])
yc5=math.ceil(p*d['cy5'])
yc6=math.ceil(p*d['cy6'])
yc7=math.ceil(p*d['cy7'])
yc8=math.ceil(p*d['cy8'])
yc9=math.ceil(p*d['cy9'])
yc10=math.ceil(p*d['cy10'])
yc11=math.ceil(p*d['cy11'])
yc12=math.ceil(p*d['cy12'])
yc13=math.ceil(p*d['cy13'])
yc14=math.ceil(p*d['cy14'])
yc15=math.ceil(p*d['cy15'])
yc16=math.ceil(p*d['cy16'])
yc17=math.ceil(p*d['cy17'])
yc18=math.ceil(p*d['cy18'])
yc19=math.ceil(p*d['cy19'])
yc20=math.ceil(p*d['cy20'])
yc21=math.ceil(p*d['cy21'])
yc22=math.ceil(p*d['cy22'])
yc23=math.ceil(p*d['cy23'])
yc24=math.ceil(p*d['cy24'])
yc25=math.ceil(p*d['cy25'])
yc26=math.ceil(p*d['cy26'])
yc27=math.ceil(p*d['cy27'])
yc28=math.ceil(p*d['cy28'])
yc29=math.ceil(p*d['cy29'])
yc30=math.ceil(p*d['cy30'])
yc31=math.ceil(p*d['cy31'])
yc32=math.ceil(p*d['cy32'])
yc33=math.ceil(p*d['cy33'])
yc34=math.ceil(p*d['cy34'])
yc35=math.ceil(p*d['cy35'])

list1=[(1600+px1,2100+py1),(1600+xc1,2100+yc1),(1600+xc2,2100+yc2),(1600+xc3,2100+yc3),(1600+xc4,2100+yc4),(1600+xc5,2100+yc5),(1600+xc6,2100+yc6),
(1600+xc7,2100+yc7),(1600+xc8,2100+yc8),(1600+xc9,2100+yc9),(1600+xc10,2100+yc10),(1600+xc11,2100+yc11),(1600+xc12,2100+yc12),(1600+xc13,2100+yc13),
(1600+xc14,2100+yc14),(1600+xc15,2100+yc15),(1600+xc16,2100+yc16),(1600+px2,2100+py2),(1600+xc17,2100+yc17),(1600+xc18,2100+yc18),(1600+xc19,2100+yc19),
(1600+xc20,2100+yc20),(1600+xc21,2100+yc21),(1600+xc22,2100+yc22),(1600+xc23,2100+yc23),(1600+xc24,2100+yc24),(1600+xc25,2100+yc25),(1600+xc26,2100+yc26),
(1600+xc27,2100+yc27),(1600+xc28,2100+yc28),(1600+xc29,2100+yc29),(1600+xc30,2100+yc30),(1600+xc31,2100+yc31),(1600+xc32,2100+yc32),(1600+xc33,2100+yc33),
(1600+xc34,2100+yc34),(1600+xc35,2100+yc35),]
# print("******")
# print(len(list1))

img=cv2.line(img, list1[0], list1[1], (0,255,0), 8)
img=cv2.line(img, list1[1], list1[2], (0,255,0), 8)
img=cv2.line(img, list1[2], list1[3], (0,255,0), 8)
img=cv2.line(img, list1[3], list1[4], (0,255,0), 8)
img=cv2.line(img, list1[4], list1[5], (0,255,0), 8)
img=cv2.line(img, list1[5], list1[6], (0,255,0), 8)
img=cv2.line(img, list1[6], list1[7], (0,255,0), 8)
img=cv2.line(img, list1[7], list1[8], (0,255,0), 8)
img=cv2.line(img, list1[8], list1[9], (0,255,0), 8)
img=cv2.line(img, list1[9], list1[10], (0,255,0), 8)
img=cv2.line(img, list1[10], list1[11], (0,255,0), 8)
img=cv2.line(img, list1[11], list1[12], (0,255,0), 8)
img=cv2.line(img, list1[12], list1[13], (0,255,0), 8)
img=cv2.line(img, list1[13], list1[14], (0,255,0), 8)
img=cv2.line(img, list1[14], list1[15], (0,255,0), 8)
img=cv2.line(img, list1[15], list1[16], (0,255,0), 8)
img=cv2.line(img, list1[16], list1[17], (0,255,0), 8)
img=cv2.line(img, list1[17], list1[18], (0,255,0), 8)
img=cv2.line(img, list1[18], list1[19], (0,255,0), 8)
img=cv2.line(img, list1[19], list1[20], (0,255,0), 8)
img=cv2.line(img, list1[20], list1[21], (0,255,0), 8)
img=cv2.line(img, list1[21], list1[22], (0,255,0), 8)
img=cv2.line(img, list1[22], list1[23], (0,255,0), 8)
img=cv2.line(img, list1[23], list1[24], (0,255,0), 8)
img=cv2.line(img, list1[24], list1[25], (0,255,0), 8)
img=cv2.line(img, list1[25], list1[26], (0,255,0), 8)
img=cv2.line(img, list1[26], list1[27], (0,255,0), 8)
img=cv2.line(img, list1[27], list1[28], (0,255,0), 8)
img=cv2.line(img, list1[28], list1[29], (0,255,0), 8)
img=cv2.line(img, list1[29], list1[30], (0,255,0), 8)
img=cv2.line(img, list1[30], list1[31], (0,255,0), 8)
img=cv2.line(img, list1[31], list1[32], (0,255,0), 8)
img=cv2.line(img, list1[32], list1[33], (0,255,0), 8)
img=cv2.line(img, list1[33], list1[34], (0,255,0), 8)
img=cv2.line(img, list1[34], list1[35], (0,255,0), 8)
img=cv2.line(img, list1[35], list1[36], (0,255,0), 8)
img=cv2.line(img, list1[36], list1[0], (0,255,0), 8)


l0=(float(d1['h2'])-float(d1['h0']))/2
l1=(float(d1['h2'])-float(d1['h4']))/2

c1=math.ceil(p*l0)
c2=math.ceil(p*d1['h0'])
c3=math.ceil(p*d1['h3'])
c4=math.ceil(p*d1['h2'])
c5=math.ceil(p*d1['h4'])
c6=math.ceil(p*l1)
c7=math.ceil(p*d1['h1'])

list2=[(2050+c1,600+0),(2050+c1+c2,600+0),(2050+c4,600+c7),(2050+c5+c6,600+c3+c7),(2050+c6,600+c3+c7),(2050+0,600+c7)]

img=cv2.line(img, list2[0], list2[1], (0,255,0), 8)
img=cv2.line(img, list2[1], list2[2], (0,255,0), 8)
img=cv2.line(img, list2[2], list2[3], (0,255,0), 8)
img=cv2.line(img, list2[3], list2[4], (0,255,0), 8)
img=cv2.line(img, list2[4], list2[5], (0,255,0), 8)
img=cv2.line(img, list2[5], list2[0], (0,255,0), 8)


x1=math.ceil(p*d2['b'])
y1=math.ceil(p*d2['h'])
px1=math.ceil(p*d2['xp1'])
px2=math.ceil(p*d2['xp2'])
px3=math.ceil(p*d2['xp3'])
px4=math.ceil(p*d2['xp4'])
px5=math.ceil(p*d2['xp5'])
px6=math.ceil(p*d2['xp6'])

py1=math.ceil(p*d2['yp1'])
py2=math.ceil(p*d2['yp2'])
py3=math.ceil(p*d2['yp3'])
py4=math.ceil(p*d2['yp4'])
py5=math.ceil(p*d2['yp5'])
py6=math.ceil(p*d2['yp6'])

xc1=math.ceil(p*d2['cx1'])
xc2=math.ceil(p*d2['cx2'])
xc3=math.ceil(p*d2['cx3'])
xc4=math.ceil(p*d2['cx4'])
xc5=math.ceil(p*d2['cx5'])
xc6=math.ceil(p*d2['cx6'])
xc7=math.ceil(p*d2['cx7'])
xc8=math.ceil(p*d2['cx8'])
xc9=math.ceil(p*d2['cx9'])
xc10=math.ceil(p*d2['cx10'])
xc11=math.ceil(p*d2['cx11'])
xc12=math.ceil(p*d2['cx12'])
xc13=math.ceil(p*d2['cx13'])
xc14=math.ceil(p*d2['cx14'])
xc15=math.ceil(p*d2['cx15'])
xc16=math.ceil(p*d2['cx16'])
xc17=math.ceil(p*d2['cx17'])
xc18=math.ceil(p*d2['cx18'])
xc19=math.ceil(p*d2['cx19'])
xc20=math.ceil(p*d2['cx20'])
xc21=math.ceil(p*d2['cx21'])
xc22=math.ceil(p*d2['cx22'])
xc23=math.ceil(p*d2['cx23'])
xc24=math.ceil(p*d2['cx24'])
xc25=math.ceil(p*d2['cx25'])
xc26=math.ceil(p*d2['cx26'])
xc27=math.ceil(p*d2['cx27'])
xc28=math.ceil(p*d2['cx28'])
xc29=math.ceil(p*d2['cx29'])
xc30=math.ceil(p*d2['cx30'])
xc31=math.ceil(p*d2['cx31'])
xc32=math.ceil(p*d2['cx32'])
xc33=math.ceil(p*d2['cx33'])

yc1=math.ceil(p*d2['cy1'])
yc2=math.ceil(p*d2['cy2'])
yc3=math.ceil(p*d2['cy3'])
yc4=math.ceil(p*d2['cy4'])
yc5=math.ceil(p*d2['cy5'])
yc6=math.ceil(p*d2['cy6'])
yc7=math.ceil(p*d2['cy7'])
yc8=math.ceil(p*d2['cy8'])
yc9=math.ceil(p*d2['cy9'])
yc10=math.ceil(p*d2['cy10'])
yc11=math.ceil(p*d2['cy11'])
yc12=math.ceil(p*d2['cy12'])
yc13=math.ceil(p*d2['cy13'])
yc14=math.ceil(p*d2['cy14'])
yc15=math.ceil(p*d2['cy15'])
yc16=math.ceil(p*d2['cy16'])
yc17=math.ceil(p*d2['cy17'])
yc18=math.ceil(p*d2['cy18'])
yc19=math.ceil(p*d2['cy19'])
yc20=math.ceil(p*d2['cy20'])
yc21=math.ceil(p*d2['cy21'])
yc22=math.ceil(p*d2['cy22'])
yc23=math.ceil(p*d2['cy23'])
yc24=math.ceil(p*d2['cy24'])
yc25=math.ceil(p*d2['cy25'])
yc26=math.ceil(p*d2['cy26'])
yc27=math.ceil(p*d2['cy27'])
yc28=math.ceil(p*d2['cy28'])
yc29=math.ceil(p*d2['cy29'])
yc30=math.ceil(p*d2['cy30'])
yc31=math.ceil(p*d2['cy31'])
yc32=math.ceil(p*d2['cy32'])
yc33=math.ceil(p*d2['cy33'])

list3=[(700+px1,600+py1),(700+px2,600+py2),(700+xc1,600+yc1),(700+xc2,600+yc2),(700+xc3,600+yc3),(700+xc4,600+yc4),
(700+xc5,600+yc5),(700+xc6,600+yc6),(700+xc7,600+yc7),(700+xc8,600+yc8),(700+xc9,600+yc9),(700+xc10,600+yc10),
(700+xc11,600+yc11),(700+xc12,600+yc12),(700+0,600+py3),(700+0,600+py3+y1),(700+x1,600+py3+y1),(700+x1,600+py6),
(700+xc24,600+yc24),(700+xc23,600+yc23),(700+xc22,600+yc22),(700+xc21,600+yc21),(700+xc20,600+yc20),(700+xc19,600+yc19),
(700+xc18,600+yc18),(700+xc17,600+yc17),(700+xc16,600+yc16),(700+xc15,600+yc15),(700+xc14,600+yc14),(700+xc13,600+yc13),
(700+px5,600+py5),(700+px4,600+py4),(700+xc33,600+yc33),(700+xc32,600+yc32),(700+xc31,600+yc31),(700+xc30,600+yc30),
(700+xc29,600+yc29),(700+xc28,600+yc28),(700+xc27,600+yc27),(700+xc26,600+yc26),(700+xc25,600+yc25)]
# print("******")
# print(len(list3))

img=cv2.line(img, list3[0], list3[1], (0,255,0), 8)
img=cv2.line(img, list3[1], list3[2], (0,255,0), 8)
img=cv2.line(img, list3[2], list3[3], (0,255,0), 8)
img=cv2.line(img, list3[3], list3[4], (0,255,0), 8)
img=cv2.line(img, list3[4], list3[5], (0,255,0), 8)
img=cv2.line(img, list3[5], list3[6], (0,255,0), 8)
img=cv2.line(img, list3[6], list3[7], (0,255,0), 8)
img=cv2.line(img, list3[7], list3[8], (0,255,0), 8)
img=cv2.line(img, list3[8], list3[9], (0,255,0), 8)
img=cv2.line(img, list3[9], list3[10], (0,255,0), 8)
img=cv2.line(img, list3[10], list3[11], (0,255,0), 8)
img=cv2.line(img, list3[11], list3[12], (0,255,0), 8)
img=cv2.line(img, list3[12], list3[13], (0,255,0), 8)
img=cv2.line(img, list3[13], list3[14], (0,255,0), 8)
img=cv2.line(img, list3[14], list3[15], (0,255,0), 8)
img=cv2.line(img, list3[15], list3[16], (0,255,0), 8)
img=cv2.line(img, list3[16], list3[17], (0,255,0), 8)
img=cv2.line(img, list3[17], list3[18], (0,255,0), 8)
img=cv2.line(img, list3[18], list3[19], (0,255,0), 8)
img=cv2.line(img, list3[19], list3[20], (0,255,0), 8)
img=cv2.line(img, list3[20], list3[21], (0,255,0), 8)
img=cv2.line(img, list3[21], list3[22], (0,255,0), 8)
img=cv2.line(img, list3[22], list3[23], (0,255,0), 8)
img=cv2.line(img, list3[23], list3[24], (0,255,0), 8)
img=cv2.line(img, list3[24], list3[25], (0,255,0), 8)
img=cv2.line(img, list3[25], list3[26], (0,255,0), 8)
img=cv2.line(img, list3[26], list3[27], (0,255,0), 8)
img=cv2.line(img, list3[27], list3[28], (0,255,0), 8)
img=cv2.line(img, list3[28], list3[29], (0,255,0), 8)
img=cv2.line(img, list3[29], list3[30], (0,255,0), 8)
img=cv2.line(img, list3[30], list3[31], (0,255,0), 8)
img=cv2.line(img, list3[31], list3[32], (0,255,0), 8)
img=cv2.line(img, list3[32], list3[33], (0,255,0), 8)
img=cv2.line(img, list3[33], list3[34], (0,255,0), 8)
img=cv2.line(img, list3[34], list3[35], (0,255,0), 8)
img=cv2.line(img, list3[35], list3[36], (0,255,0), 8)
img=cv2.line(img, list3[36], list3[37], (0,255,0), 8)
img=cv2.line(img, list3[37], list3[38], (0,255,0), 8)
img=cv2.line(img, list3[38], list3[39], (0,255,0), 8)
img=cv2.line(img, list3[39], list3[40], (0,255,0), 8)
img=cv2.line(img, list3[40], list3[0], (0,255,0), 8)
# img=cv2.line(img, list3[41], list3[0], (0,255,0), 8)

x1=math.ceil(p*d3['b'])
y1=math.ceil(p*d3['h'])
y2=math.ceil(p*d3['s'])
px1=math.ceil(p*d3['xp1'])
px2=math.ceil(p*d3['xp2'])
px3=math.ceil(p*d3['xp3'])
px4=math.ceil(p*d3['xp4'])

py1=math.ceil(p*d3['yp1'])
py2=math.ceil(p*d3['yp2'])
py3=math.ceil(p*d3['yp3'])
py4=math.ceil(p*d3['yp4'])

xc1=math.ceil(p*d3['cx1'])
xc2=math.ceil(p*d3['cx2'])
xc3=math.ceil(p*d3['cx3'])
xc4=math.ceil(p*d3['cx4'])
xc5=math.ceil(p*d3['cx5'])
xc6=math.ceil(p*d3['cx6'])
xc7=math.ceil(p*d3['cx7'])
xc8=math.ceil(p*d3['cx8'])
xc9=math.ceil(p*d3['cx9'])
xc10=math.ceil(p*d3['cx10'])
xc11=math.ceil(p*d3['cx11'])
xc12=math.ceil(p*d3['cx12'])
xc13=math.ceil(p*d3['cx13'])
xc14=math.ceil(p*d3['cx14'])

yc1=math.ceil(p*d3['cy1'])
yc2=math.ceil(p*d3['cy2'])
yc3=math.ceil(p*d3['cy3'])
yc4=math.ceil(p*d3['cy4'])
yc5=math.ceil(p*d3['cy5'])
yc6=math.ceil(p*d3['cy6'])
yc7=math.ceil(p*d3['cy7'])
yc8=math.ceil(p*d3['cy8'])
yc9=math.ceil(p*d3['cy9'])
yc10=math.ceil(p*d3['cy10'])
yc11=math.ceil(p*d3['cy11'])
yc12=math.ceil(p*d3['cy12'])
yc13=math.ceil(p*d3['cy13'])
yc14=math.ceil(p*d3['cy14'])

list4=[(700+px1,2000+py1),(700+px2,2000+py2),(700+xc1,2000+yc1),(700+xc2,2000+yc2),(700+xc3,2000+yc3),(700+xc4,2000+yc4),(700+xc5,2000+yc5),
(700+xc6,2000+yc6),(700+xc7,2000+yc7),(700+xc8,2000+yc8),(700+xc9,2000+yc9),(700+xc10,2000+yc10),(700+px3,2000+py3),(700+0,2000+py3+y2),(700+x1,2000+py3+y2),
(700+x1,2000+py4),(700+xc11,2000+yc11),(700+xc12,2000+yc12),(700+xc13,2000+yc13),(700+xc14,2000+yc14)]
# print("******:list3")
# print(len(list4))

img=cv2.line(img, list4[0], list4[1], (0,255,0), 8)
img=cv2.line(img, list4[1], list4[2], (0,255,0), 8)
img=cv2.line(img, list4[2], list4[3], (0,255,0), 8)
img=cv2.line(img, list4[3], list4[4], (0,255,0), 8)
img=cv2.line(img, list4[4], list4[5], (0,255,0), 8)
img=cv2.line(img, list4[5], list4[6], (0,255,0), 8)
img=cv2.line(img, list4[6], list4[7], (0,255,0), 8)
img=cv2.line(img, list4[7], list4[8], (0,255,0), 8)
img=cv2.line(img, list4[8], list4[9], (0,255,0), 8)
img=cv2.line(img, list4[9], list4[10], (0,255,0), 8)
img=cv2.line(img, list4[10], list4[11], (0,255,0), 8)
img=cv2.line(img, list4[11], list4[12], (0,255,0), 8)
img=cv2.line(img, list4[12], list4[13], (0,255,0), 8)
img=cv2.line(img, list4[13], list4[14], (0,255,0), 8)
img=cv2.line(img, list4[14], list4[15], (0,255,0), 8)
img=cv2.line(img, list4[15], list4[16], (0,255,0), 8)
img=cv2.line(img, list4[16], list4[17], (0,255,0), 8)
img=cv2.line(img, list4[17], list4[18], (0,255,0), 8)
img=cv2.line(img, list4[18], list4[19], (0,255,0), 8)
img=cv2.line(img, list4[19], list4[0], (0,255,0), 8)
# img=cv2.line(img, list4[20], list4[0], (0,255,0), 8)

# img=cv2.line(img, list1[37], list1[38], (0,255,0), 8)
# img=cv2.line(img, list1[38], list1[39], (0,255,0), 8)
# img=cv2.line(img, list1[39], list1[40], (0,255,0), 8)
# img=cv2.line(img, list1[40], list1[41], (0,255,0), 8)
# img=cv2.line(img, list1[41], list1[42], (0,255,0), 8)
# img=cv2.line(img, list1[42], list1[43], (0,255,0), 8)
# img=cv2.line(img, list1[43], list1[44], (0,255,0), 8)
# img=cv2.line(img, list1[44], list1[45], (0,255,0), 8)
# img=cv2.line(img, list1[45], list1[46], (0,255,0), 8)
# img=cv2.line(img, list1[46], list1[47], (0,255,0), 8)
# img=cv2.line(img, list1[47], list1[48], (0,255,0), 8)
# img=cv2.line(img, list1[48], list1[49], (0,255,0), 8)
# img=cv2.line(img, list1[49], list1[50], (0,255,0), 8)
# img=cv2.line(img, list1[50], list1[51], (0,255,0), 8)
# img=cv2.line(img, list1[51], list1[52], (0,255,0), 8)
# img=cv2.line(img, list1[52], list1[53], (0,255,0), 8)
# img=cv2.line(img, list1[53], list1[54], (0,255,0), 8)
# img=cv2.line(img, list1[54], list1[0], (0,255,0), 8)

cv2.imshow('no-coin-1.jpg', img)
# cv2.imwrite("IMG_5438-f.jpg",img)
k=cv2.waitKey(0) & 0xFF
if k == 27:
    cv2.destroyAllWindows()

